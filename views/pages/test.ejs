<html>
<head>

    <%- include ('../partials/includes.ejs') %>

    <link rel="stylesheet" type="text/css" href="css/test.css"/>

</head>

<body>
    <%- include ('../partials/navbar.ejs') %>
    <section id="home" class="home section">
        <div class="page-table">
            <div class="table-cell text-center">
                <div class="card">
                  <h2>Hello! this is a dark theme!</h2>
                </div>
                <span id="theme_toggler">
                  Change theme
                </span>
            </div>
        </div>
    </section>


    <%- include ('../partials/footer.ejs') %>
    <%- include ('../partials/includesjs.ejs') %>

</body>
<script type="text/javascript">
// https://dev.to/codedgar/how-to-create-a-dark-theme-system-in-5-minutes-or-less-with-vanilla-js-2922
let theme_toggler = document.querySelector('#theme_toggler');

theme_toggler.addEventListener('click', function(){ 
  document.body.classList.toggle('dark_mode');
  if(document.body.classList.contains('dark_mode')){
    localStorage.setItem('website_theme','dark_mode');
  } else{
    localStorage.setItem('website_theme','default');
  }
});

function retrieve_theme(){
  var theme = localStorage.getItem('website_theme');
  if(theme != null){
    document.body.classList.remove('default', 'dark_mode'); document.body.classList.add(theme);
  }
}


window.addEventListener("storage",function(){
retrieve_theme();
},false);
</script>
</html>
